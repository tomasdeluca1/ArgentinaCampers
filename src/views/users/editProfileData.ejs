<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head') %>
    <link rel="stylesheet" href="../../../CSS/main/home.css">
    <link rel="stylesheet" href="../../../CSS/users/editProfile.css">

    <title>Editar perfil</title>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="nav-bar">
            <ul class="link-list" type="none">
                <li class="nav-header-item"><img src="../../images/imagenesVariadas/logo.png" alt="Logo Argentina campers" class="logoAC"></li>
                <li class="nav-header-item home"><a href="../../home" class="links-header-nav"><h2>Home</h2></a></li>
                <li class="nav-header-item products"><a href="../../products" class="links-header-nav"><h2>Nuestras CamperVans</h2></a></li>
                <li class="nav-header-item about-us"><a href="../../aboutUs" class="links-header-nav"><h2>About us</h2></a></li>
                <li class="carro-header nav-header-item"><a href="../../rental-cart" class="links-header-nav carrito-header"><i class="fa-solid fa-cart-shopping"></i></a></li>
                <li class="nav-header-item menu"><a href="#"><i class="fa-solid fa-bars burger-menu"></i></a></li>
                <% if(locals.isLogged) { %>
                    <li class="menu-horizontal">
                        <div class="ajutar-todo">
                            <div class="foto-y-perfil">
                                <div class="contenedor-foto-perfil">
                                    <img src="../../../images/avatarPerfil/<%= locals.userLogged.avatar %> " alt="Foto de perfil" class="foto-de-perfil">
                                </div>
                                <a href="#" class="link-menu-horizontal"><%= locals.userLogged.userName %></a>
                                <a href="#"><div class="nav-header-username-chevron"></div></a>
                            </div>
                            <ul class="sub-menu-vertical">
                                <li><a href="../../profile/<%= locals.userLogged.id %> " class="link-menu-vertical mi-perfil">Mi perfil</a></li>
                                <% if(locals.admin) { %> 
                                    <li><a href="../../all-users" class="link-menu-vertical all-users">Todos los usuarios</a></li>
                                <% } %> 
                                <li><a href="../../logout" class="link-menu-vertical cerrar-sesion">Cerrar sesion</a></li>
                            </ul>
                        </div>
                    </li>
                <% } else { %> 
                    <ul class="iniciar-sesion">
                        <li class="usuario"><a href="../login" class="links-header links-header-user"><i class="fa-solid fa-right-to-bracket"></i>Iniciar sesion</a></li>
                        <li class="usuario"><a href="../register" class="links-header links-header-user"><i class="fa-solid fa-address-card"></i>Registrarse</a></li>
                    </ul>
                <% } %> 
            </ul>
        </nav>
    </header>

    <!-- Todo el cuerpo -->

    <section class="nav-vehiculos">
        <article>
            <h3><a href="../../home">Home</a> / <a href="">Edicion de mis datos</a></h3>
        </article>
    </section>

    <!-- Cuerpo -->
    <main class="body">
        <div class="container-all">
            <div class="container-titulo">
                <h2>Editar mis datos</h2>
            </div>
            <div class="container-form">  
                <form action="editData?_method=put" method="post" enctype="multipart/form-data">

                    <div class="user-data new-avatar-container">
                        <div class="container-all-divs-foto">
                            <label for="new-avatar" class="label">
                                <div class="container-foto-de-perfil">
                                    <div class="div-foto-de-perfil">
                                        <img src="../../../images/avatarPerfil/<%= userData.avatar %> " alt="" class="foto-de-perfil-edit">
                                    </div>
                                </div>
                            </label>
                        </div>
                        <div class="container-all-divs-labels">
                            <h3 class="h3-user-name"><%= userData.userName %></h3>
                            <label for="new-avatar" class="label label-user-name-foto">Cambiar foto de perfil</label>
                            <input 
                            type="file" 
                            name="newAvatar" 
                            id="new-avatar" 
                            style='display: none' 
                            class="input-edit"
                            accept=".jpg, .png, .PNG, .JPG, .JPEG, .jpeg" 
                            >
                            <% if (locals.errors && errors.newAvatar) { %>
                                <div class="errors">
                                    <p><%= errors.newAvatar.msg %> </p>
                                </div>
                            <% } %>
                        </div>
                    </div>

                    <div class="user-data registros">
                        <label for="new-user-name" class="label label-registros">Nombre de usuario</label>
                        <input 
                        type="text" 
                        name="newUserName" 
                        id="new-user-name" 
                        minlength="4"
                        maxlength="15"
                        value="<%= userData.userName %>" 
                        class="input-edit <%= locals.errors && errors.newUserName ? 'is-invalid' : null %>"
                        >
                        <% if (locals.errors && errors.newUserName) { %>
                            <div class="errors">
                                <p><%= errors.newUserName.msg %> </p>
                            </div>
                        <% } %> 
                    </div>
                    <div class="user-data registros">
                        <label class="label label-registros" for="new-email">Correo electronico</label>
                        <input 
                        type="text" 
                        name="newEmail" 
                        id="new-email" 
                        class="input-edit <%= locals.errors && errors.newEmail ? 'is-invalid' : null %>" 
                        maxlength="100"
                        value="<%= userData.email %>"
                        >
                        <% if (locals.errors && errors.newEmail) { %>
                            <div class="errors">
                                <p><%= errors.newEmail.msg %> </p>
                            </div>
                        <% } %> 
                    </div>
                    
                    <div class="user-data registros">
                        <label class="label label-registros" for="new-phone-number">Numero telefonico</label>
                        <input
                        minlength="13"
                        maxlength="13"
                        min="0"
                        type="tel" 
                        name="newPhoneNumber" 
                        id="new-phone-number" 
                        class="input-edit  <%= locals.errors && errors.newPhoneNumber ? 'is-invalid' : null %>" 
                        value="<%= userData && !userData.phoneNumber ?  '-' : userData.phoneNumber %>"
                        >
                        <% if (locals.errors && errors.newPhoneNumber) { %>
                            <div class="errors">
                                <p><%= errors.newPhoneNumber.msg %> </p>
                            </div>
                        <% } %> 
                    </div>
                    <div class="button-div">
                        <button class="button">Enviar cambios</button>
                    </div>
                    
                </form>
            </div>
        </div>
    </main>

    <!-- Footer --> 
    <%- include('../partials/footer') %>
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head') %>
    <link rel="stylesheet" href="../../../CSS/main/home.css">
    <link rel="stylesheet" href="../../../CSS/users/editProfile.css">

    <title>Editar perfil</title>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="nav-bar">
            <ul class="link-list" type="none">
                <li class="nav-header-item"><img src="../../images/imagenesVariadas/logo.png" alt="Logo Argentina campers" class="logoAC"></li>
                <li class="nav-header-item home"><a href="../../home" class="links-header-nav"><h2>Home</h2></a></li>
                <li class="nav-header-item products"><a href="../../products" class="links-header-nav"><h2>Nuestras CamperVans</h2></a></li>
                <li class="nav-header-item about-us"><a href="../../aboutUs" class="links-header-nav"><h2>About us</h2></a></li>
                <li class="carro-header nav-header-item"><a href="../../rental-cart" class="links-header-nav carrito-header"><i class="fa-solid fa-cart-shopping"></i></a></li>
                <li class="nav-header-item menu"><a href="#"><i class="fa-solid fa-bars burger-menu"></i></a></li>
                <% if(locals.isLogged) { %>
                    <li class="menu-horizontal">
                        <div class="ajutar-todo">
                            <div class="foto-y-perfil">
                                <div class="contenedor-foto-perfil">
                                    <img src="../../../images/avatarPerfil/<%= locals.userLogged.avatar %> " alt="Foto de perfil" class="foto-de-perfil">
                                </div>
                                <a href="#" class="link-menu-horizontal"><%= locals.userLogged.userName %></a>
                                <a href="#"><div class="nav-header-username-chevron"></div></a>
                            </div>
                            <ul class="sub-menu-vertical">
                                <li><a href="../../profile/<%= locals.userLogged.id %> " class="link-menu-vertical mi-perfil">Mi perfil</a></li>
                                <% if(locals.admin) { %> 
                                    <li><a href="../../all-users" class="link-menu-vertical all-users">Todos los usuarios</a></li>
                                <% } %> 
                                <li><a href="../../logout" class="link-menu-vertical cerrar-sesion">Cerrar sesion</a></li>
                            </ul>
                        </div>
                    </li>
                <% } else { %> 
                    <ul class="iniciar-sesion">
                        <li class="usuario"><a href="../login" class="links-header links-header-user"><i class="fa-solid fa-right-to-bracket"></i>Iniciar sesion</a></li>
                        <li class="usuario"><a href="../register" class="links-header links-header-user"><i class="fa-solid fa-address-card"></i>Registrarse</a></li>
                    </ul>
                <% } %> 
            </ul>
        </nav>
    </header>

    <!-- Todo el cuerpo -->

    <section class="nav-vehiculos">
        <article>
            <h3><a href="../../home">Home</a> / <a href="">Edicion de mis datos</a></h3>
        </article>
    </section>

     <!-- Cuerpo -->
     <main class="body">
        <div class="container-all">
            <div class="container-titulo">
                <h2>Editar mi contrase√±a</h2>
            </div>
            <div class="container-form">  
                <form action="editDireccion?_method=put" method="post">
                    <h3 class="h3-user-name h3-user-password">Cambiar mi direccion</h3>
                    <div class="user-data registros">
                        <% let provincias = ["Buenos Aires", "Buenos Aires Capital", "Catamarca", "Chaco", "Chubut", "Cordoba", "Corrientes", "Entre Rios", "Formosa", "Jujuy", "La Pampa", "La Rioja", "Mendoza", "Misiones", "Neuquen", "Rio Negro", "Salta", "San Juan", "San Luis", "Santa Cruz", "Santa Fe", "Santiago del Estero", "Tierra del Fuego", "Tucuman"]; %>
                        <label for="new-provincia" class="label label-registros">Nueva provincia</label>
                        <select name="newProvincia" id="new-provincia" required class="input-edit <%= locals.errors && errors.newProvincia ? 'is-invalid' : null %>">
                            <option disabled selected value><%= userData.provincia.dataValues.provincia %> </option>
                            <% for (let i = 0; i < provincias.length; i++) { %> 
                                <option value="<%= i + 1 %>"><%= provincias[i] %></option>
                            <% } %> 
                        </select>
                        <% if (locals.errors && errors.newProvincia) { %>
                            <div class="errors">
                                <p><%= errors.newProvincia.msg %></p>
                            </div>
                        <% } %> 
                    </div>
                    <div class="user-data registros">
                        <label for="new-municipio" class="label label-registros">Cambia tu municipio</label>
                        <input 
                            placeholder="Nuevo municipio"
                            type="text" 
                            name="newMunicipio" 
                            id="new-municipio" 
                            minlength="2"
                            maxlength="100"
                            class="input-edit <%= locals.errors && errors.newMunicipio ? 'is-invalid' : null %>"
                            value="<%= userData.municipio %>"
                            required
                        >
                        <% if (locals.errors && errors.newMunicipio) { %>
                            <div class="errors">
                                <p><%= errors.newMunicipio.msg %> </p>
                            </div>
                        <% } %> 
                    </div>
                    <div class="user-data registros">
                        <label for="new-ciudad" class="label label-registros">Cambia tu ciudad</label>
                        <input 
                            placeholder="Nueva ciudad"
                            type="text" 
                            name="newCiudad" 
                            id="new-ciudad" 
                            minlength="2"
                            maxlength="100"
                            class="input-edit <%= locals.errors && errors.newCiudad ? 'is-invalid' : null %>"
                            value="<%= userData.ciudad %>"                            
                            required
                        >
                        <% if (locals.errors && errors.newCiudad) { %>
                            <div class="errors">
                                <p><%= errors.newCiudad.msg %> </p>
                            </div>
                        <% } %> 
                    </div>
                    <div class="user-data registros">
                        <label for="new-calle" class="label label-registros">Cambia tu calle</label>
                        <input 
                            placeholder="Nueva calle"
                            type="text" 
                            name="newCalle" 
                            id="new-calle" 
                            minlength="2"
                            maxlength="100"
                            class="input-edit <%= locals.errors && errors.newCalle ? 'is-invalid' : null %>"
                            value="<%= userData.calle %>"                            
                            required
                        >
                        <% if (locals.errors && errors.newCalle) { %>
                            <div class="errors">
                                <p><%= errors.newCalle.msg %> </p>
                            </div>
                        <% } %> 
                    </div>
                    <div class="user-data registros">
                        <label for="new-numero-vivienda" class="label label-registros">Cambia tu numero de vivienda</label>
                        <input 
                            placeholder="Nuevo numero de vivienda"
                            type="number" 
                            name="newNumeroVivienda" 
                            id="new-numero-vivienda" 
                            minlength="2"
                            maxlength="100"
                            class="input-edit <%= locals.errors && errors.newNumeroVivienda ? 'is-invalid' : null %>"
                            value="<%= userData.numeroVivienda %>"                            
                            required
                        >
                        <% if (locals.errors && errors.newNumeroVivienda) { %>
                            <div class="errors">
                                <p><%= errors.newNumeroVivienda.msg %> </p>
                            </div>
                        <% } %> 
                    </div>
                    <div class="user-data registros">
                        <label for="new-codigo-postal" class="label label-registros">Cambia tu codigo postal</label>
                        <input 
                            placeholder="Nuevo codigo postal"
                            type="number" 
                            name="newCodigoPostal" 
                            id="new-codigo-postal" 
                            minlength="2"
                            maxlength="100"
                            class="input-edit <%= locals.errors && errors.newCodigoPostal ? 'is-invalid' : null %>"
                            value="<%= userData.codigoPostal %>"                            
                            required
                        >
                        <% if (locals.errors && errors.newCodigoPostal) { %>
                            <div class="errors">
                                <p><%= errors.newCodigoPostal.msg %> </p>
                            </div>
                        <% } %> 
                    </div>
                    <div class="button-div">
                        <button class="button">Enviar cambios</button>
                    </div>
                </form>
            </div>
        </div>
    </main>


    <!-- Footer --> 
    <%- include('../partials/footer') %>
</body>